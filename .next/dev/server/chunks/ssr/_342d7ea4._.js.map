{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/adrianbautista/Desktop/social-monetization-platform%201.20.22%E2%80%AFa.m./lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from 'clsx'\nimport { twMerge } from 'tailwind-merge'\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,oOAAO,EAAC,IAAA,8LAAI,EAAC;AACtB"}},
    {"offset": {"line": 19, "column": 0}, "map": {"version":3,"sources":["file:///Users/adrianbautista/Desktop/social-monetization-platform%201.20.22%E2%80%AFa.m./components/navigation/bottom-nav.tsx"],"sourcesContent":["\"use client\"\n\nimport { Home, Search, PlusSquare, MessageCircle, User } from \"lucide-react\"\nimport Link from \"next/link\"\nimport { usePathname } from \"next/navigation\"\nimport { cn } from \"@/lib/utils\"\n// 1. Importamos el hook para saber si hay sesión\nimport { useSession } from \"next-auth/react\"\n\nconst navItems = [\n  { href: \"/\", icon: Home, label: \"Inicio\" },\n  { href: \"/explore\", icon: Search, label: \"Descubrir\" },\n  { href: \"/create\", icon: PlusSquare, label: \"Crear\", special: true },\n  { href: \"/messages\", icon: MessageCircle, label: \"Mensajes\" },\n  { href: \"/profile\", icon: User, label: \"Perfil\" },\n]\n\nexport function BottomNav() {\n  const pathname = usePathname()\n  // 2. Obtenemos los datos de la sesión actual\n  const { data: session } = useSession()\n\n  return (\n    <nav className=\"fixed bottom-0 left-0 right-0 z-50 glass border-t border-glass-border pb-[env(safe-area-inset-bottom)]\">\n      <div className=\"flex items-center justify-around h-16 max-w-lg mx-auto\">\n        {navItems.map((item) => {\n          const isActive = pathname === item.href || (item.href !== \"/\" && pathname.startsWith(item.href))\n          const Icon = item.icon\n\n          if (item.special) {\n            return (\n              <Link key={item.href} href={item.href} className=\"flex items-center justify-center\">\n                <div className=\"w-12 h-12 rounded-xl bg-gradient-to-br from-primary to-accent flex items-center justify-center glow-cyan\">\n                  <Icon className=\"w-6 h-6 text-primary-foreground\" />\n                </div>\n              </Link>\n            )\n          }\n\n          return (\n            <Link\n              key={item.href}\n              href={item.href}\n              className={cn(\n                \"flex flex-col items-center gap-1 px-3 py-2 transition-all\",\n                isActive ? \"text-primary\" : \"text-muted-foreground hover:text-foreground\",\n              )}\n            >\n              {/* 3. AQUÍ ESTÁ LA MAGIA: Si es perfil y hay sesión, muestra la foto */}\n              {item.label === \"Perfil\" && session?.user?.image ? (\n                 <img \n                    src={session.user.image} \n                    alt=\"Perfil\" \n                    className={cn(\n                        \"w-6 h-6 rounded-full object-cover border border-white/20\",\n                        isActive && \"ring-2 ring-primary\"\n                    )}\n                 />\n              ) : (\n                 <Icon className={cn(\"w-6 h-6\", isActive && \"glow-cyan\")} />\n              )}\n              \n              <span className=\"text-xs font-medium\">{item.label}</span>\n            </Link>\n          )\n        })}\n      </div>\n    </nav>\n  )\n}"],"names":[],"mappings":";;;;;AAEA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA,iDAAiD;AACjD;AAPA;;;;;;;AASA,MAAM,WAAW;IACf;QAAE,MAAM;QAAK,MAAM,+RAAI;QAAE,OAAO;IAAS;IACzC;QAAE,MAAM;QAAY,MAAM,oSAAM;QAAE,OAAO;IAAY;IACrD;QAAE,MAAM;QAAW,MAAM,oTAAU;QAAE,OAAO;QAAS,SAAS;IAAK;IACnE;QAAE,MAAM;QAAa,MAAM,6TAAa;QAAE,OAAO;IAAW;IAC5D;QAAE,MAAM;QAAY,MAAM,8RAAI;QAAE,OAAO;IAAS;CACjD;AAEM,SAAS;IACd,MAAM,WAAW,IAAA,gRAAW;IAC5B,6CAA6C;IAC7C,MAAM,EAAE,MAAM,OAAO,EAAE,GAAG,IAAA,0YAAU;IAEpC,qBACE,6WAAC;QAAI,WAAU;kBACb,cAAA,6WAAC;YAAI,WAAU;sBACZ,SAAS,GAAG,CAAC,CAAC;gBACb,MAAM,WAAW,aAAa,KAAK,IAAI,IAAK,KAAK,IAAI,KAAK,OAAO,SAAS,UAAU,CAAC,KAAK,IAAI;gBAC9F,MAAM,OAAO,KAAK,IAAI;gBAEtB,IAAI,KAAK,OAAO,EAAE;oBAChB,qBACE,6WAAC,sSAAI;wBAAiB,MAAM,KAAK,IAAI;wBAAE,WAAU;kCAC/C,cAAA,6WAAC;4BAAI,WAAU;sCACb,cAAA,6WAAC;gCAAK,WAAU;;;;;;;;;;;uBAFT,KAAK,IAAI;;;;;gBAMxB;gBAEA,qBACE,6WAAC,sSAAI;oBAEH,MAAM,KAAK,IAAI;oBACf,WAAW,IAAA,kHAAE,EACX,6DACA,WAAW,iBAAiB;;wBAI7B,KAAK,KAAK,KAAK,YAAY,SAAS,MAAM,sBACxC,6WAAC;4BACE,KAAK,QAAQ,IAAI,CAAC,KAAK;4BACvB,KAAI;4BACJ,WAAW,IAAA,kHAAE,EACT,4DACA,YAAY;;;;;iDAInB,6WAAC;4BAAK,WAAW,IAAA,kHAAE,EAAC,WAAW,YAAY;;;;;;sCAG9C,6WAAC;4BAAK,WAAU;sCAAuB,KAAK,KAAK;;;;;;;mBArB5C,KAAK,IAAI;;;;;YAwBpB;;;;;;;;;;;AAIR"}},
    {"offset": {"line": 153, "column": 0}, "map": {"version":3,"sources":["file:///Users/adrianbautista/Desktop/social-monetization-platform%201.20.22%E2%80%AFa.m./app/create/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useRef } from 'react';\nimport { useRouter } from 'next/navigation';\nimport { useSession } from 'next-auth/react'; // Lo necesitamos para obtener el email\nimport { \n    ArrowLeft, \n    Video, \n    CheckCircle, \n    AlertCircle,\n    Loader,\n    Lock,\n    X\n} from 'lucide-react';\nimport { BottomNav } from '@/components/navigation/bottom-nav';\n\n// Componente Toast simple para avisos\nconst Toast = ({ message, type }: { message: string, type: 'success' | 'error' }) => (\n    <div className={`fixed bottom-24 left-1/2 transform -translate-x-1/2 p-3 rounded-xl shadow-lg flex items-center gap-2 z-50 transition-opacity duration-300 ${type === 'success' ? 'bg-green-600' : 'bg-red-600'} text-white`}>\n        {type === 'success' ? <CheckCircle className=\"w-5 h-5\" /> : <AlertCircle className=\"w-5 h-5\" />}\n        <span>{message}</span>\n    </div>\n);\n\nexport default function CreatePostPage() {\n    const router = useRouter();\n    const { data: session } = useSession(); \n    \n    const [file, setFile] = useState<File | null>(null);\n    const [previewUrl, setPreviewUrl] = useState<string | null>(null);\n    const [caption, setCaption] = useState('');\n    const [isSubmitting, setIsSubmitting] = useState(false);\n    const [toast, setToast] = useState<{ message: string, type: 'success' | 'error' } | null>(null);\n    const fileInputRef = useRef<HTMLInputElement>(null);\n\n    const handleFileChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n        const selectedFile = e.target.files?.[0];\n        if (selectedFile) {\n            setFile(selectedFile);\n            setPreviewUrl(URL.createObjectURL(selectedFile));\n        }\n    };\n\n    const handlePublish = async () => {\n        // Validación básica\n        if (!file || isSubmitting || !session?.user?.email) {\n            setToast({ message: \"Selecciona un archivo y asegúrate de estar logueado.\", type: 'error' });\n            setTimeout(() => setToast(null), 3000);\n            return;\n        }\n\n        setIsSubmitting(true);\n        setToast(null);\n\n        try {\n            // 1. Construir el objeto FormData (necesario para enviar archivos)\n            const formData = new FormData();\n            formData.append('file', file);\n            formData.append('caption', caption);\n            formData.append('email', session.user.email); // Enviamos el email para que el backend identifique al usuario\n\n            // 2. Enviar el archivo a la API de Subida\n            const response = await fetch('/api/upload', {\n                method: 'POST',\n                // FormData maneja el encabezado Content-Type automáticamente\n                body: formData,\n            });\n\n            const data = await response.json();\n\n            if (response.ok) {\n                // Éxito: Post guardado en Supabase y Prisma\n                setToast({ message: \"¡Post publicado con éxito!\", type: 'success' });\n                \n                // Limpiar y redirigir\n                setFile(null);\n                setPreviewUrl(null);\n                setCaption('');\n                \n                // Limpiamos el localStorage solo para que los posts viejos no aparezcan por error\n                localStorage.removeItem('posts'); \n\n                setTimeout(() => {\n                    setToast(null);\n                    router.push('/profile'); // Volvemos a tu perfil\n                }, 1500);\n\n            } else {\n                // Error en la API\n                setToast({ message: data.error || \"Fallo en la publicación.\", type: 'error' });\n                console.error(\"Error al publicar:\", data.details || data.error);\n            }\n\n        } catch (error) {\n            console.error('Error de red/petición:', error);\n            setToast({ message: \"Error de conexión. Intenta de nuevo.\", type: 'error' });\n        } finally {\n            setIsSubmitting(false);\n            setTimeout(() => setToast(null), 3000);\n        }\n    };\n    \n    // ... Código de Renderizado ...\n\n    return (\n        <div className=\"fixed inset-0 bg-black flex flex-col\">\n            <header className=\"flex items-center justify-between p-4 border-b border-gray-800\">\n                <button onClick={() => router.back()} className=\"text-white hover:text-pink-500\">\n                    <ArrowLeft className=\"w-6 h-6\" />\n                </button>\n                <h1 className=\"text-xl font-bold text-white\">Crear Nuevo Post</h1>\n                <button \n                    onClick={handlePublish}\n                    disabled={!file || isSubmitting}\n                    className={`px-4 py-2 rounded-xl text-sm font-semibold transition-colors ${\n                        file && !isSubmitting ? 'bg-pink-600 text-white hover:bg-pink-700' : 'bg-gray-700 text-gray-400 cursor-not-allowed'\n                    }`}\n                >\n                    {isSubmitting ? (\n                        <div className=\"flex items-center gap-2\">\n                            <Loader className=\"w-4 h-4 animate-spin\" />\n                            Subiendo...\n                        </div>\n                    ) : \"Publicar\"}\n                </button>\n            </header>\n\n            <main className=\"flex-1 overflow-y-auto p-4 space-y-4 pb-24\">\n                \n                {/* Selector de Archivo */}\n                <input \n                    type=\"file\" \n                    ref={fileInputRef}\n                    onChange={handleFileChange} \n                    accept=\"image/*,video/*\"\n                    className=\"hidden\"\n                />\n\n                {!previewUrl ? (\n                    <div \n                        onClick={() => fileInputRef.current?.click()}\n                        className=\"h-64 border-2 border-dashed border-gray-700 rounded-xl flex flex-col items-center justify-center text-gray-500 cursor-pointer hover:border-pink-500 transition-colors\"\n                    >\n                        <Video className=\"w-10 h-10 mb-2\" />\n                        <p className=\"text-lg font-medium\">Toca para seleccionar tu video/foto</p>\n                        <p className=\"text-sm mt-1\">Formatos: JPG, PNG, MP4</p>\n                    </div>\n                ) : (\n                    <div className=\"relative h-96 w-full rounded-xl overflow-hidden bg-gray-900 shadow-xl\">\n                        {file?.type.startsWith('video/') ? (\n                            <video src={previewUrl} className=\"w-full h-full object-cover\" controls autoPlay loop />\n                        ) : (\n                            <img src={previewUrl} alt=\"Vista previa del post\" className=\"w-full h-full object-cover\" />\n                        )}\n                        <button \n                            onClick={() => {\n                                setFile(null);\n                                setPreviewUrl(null);\n                                if(fileInputRef.current) fileInputRef.current.value = '';\n                            }}\n                            className=\"absolute top-3 right-3 p-2 bg-black/50 rounded-full text-white hover:bg-black/70 transition-colors\"\n                        >\n                            <X className=\"w-5 h-5\" />\n                        </button>\n                    </div>\n                )}\n\n                {/* Área de Texto y Opciones */}\n                <textarea\n                    value={caption}\n                    onChange={(e) => setCaption(e.target.value)}\n                    placeholder=\"Escribe una descripción (máx. 250 caracteres)...\"\n                    maxLength={250}\n                    rows={4}\n                    className=\"w-full p-4 bg-gray-900 border border-gray-700 rounded-xl text-white placeholder-gray-500 focus:ring-pink-500 focus:border-pink-500 outline-none resize-none\"\n                />\n                <p className=\"text-right text-sm text-gray-500\">{caption.length}/250</p>\n                \n                {/* Opciones Adicionales (Placeholder) */}\n                <div className=\"space-y-3 pt-2\">\n                    <div className=\"flex items-center justify-between p-4 bg-gray-900 rounded-xl border border-gray-800\">\n                        <span className=\"text-white font-medium flex items-center gap-2\">\n                            <Lock className=\"w-5 h-5 text-yellow-400\" />\n                            Contenido Exclusivo\n                        </span>\n                        <span className='text-gray-500'>No (por defecto)</span>\n                    </div>\n                </div>\n\n            </main>\n\n            <BottomNav />\n            {toast && <Toast message={toast.message} type={toast.type} />}\n        </div>\n    );\n}"],"names":[],"mappings":"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"}}]
}